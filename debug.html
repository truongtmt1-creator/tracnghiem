<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Test Lưu Kết Quả</title>
</head>
<body>
  <h2>Kiểm tra lưu kết quả học sinh</h2>
  <button onclick="testSubmit()">Gửi dữ liệu test</button>

  <script>
    async function testSubmit() {
      const url = 'https://script.google.com/macros/s/AKfycbx9Kc3Zv77wTfBSQcAGbtaZykSDIIMi1bW3CDRHHs6xJu_AWlRPw1UBaaR2G5ROY3F9/exec';

      const testData = {
        action: "logResult",
        StudentInfo: {
          Khoi: "10",
          Lop: "10A1",
          STT: "01",
          HoTen: "Nguyen Van A"
        },
        TotalCorrect: 8,
        TotalQuestions: 10,
        CompletionTime: new Date().toLocaleString('vi-VN'),
        Answers: {
          Q1: {
            is_correct: true,
            question_content: "Câu hỏi 1",
            correct: "A",
            answered: "A",
            original_key: "Q1"
          },
          Q2: {
            is_correct: false,
            question_content: "Câu hỏi 2",
            correct: "B",
            answered: "C",
            original_key: "Q2"
          }
        }
      };

      try {
        const response = await fetch(url, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(testData)
        });

        const result = await response.json();
        alert("Phản hồi từ server:\n" + JSON.stringify(result, null, 2));
      } catch (error) {
        alert("Lỗi gửi dữ liệu:\n" + error.message);
        console.error("Fetch error:", error);
      }
    }
  </script>
</body>
</html>
